<html>
  <head>
    <title>Carena</title>
    <script type="text/javascript" src="../lib/carena.js"></script>
  </head>
  <body>
    <canvas width="400" height="400" id="drag-and-drop"></canvas>
    <script type="text/javascript">
      (function() {
        /*
          we are building something like
          
          []<| --- [ scene ]
                  /         \
               [ node ]      [ drop ]
              /        \
         [ drag ]    [ drag ]

          nodes from the left branch can be dropped into the right
        */

        var feature  = carena.feature,
            renderer = carena.Build({}, [feature.Renderer], {canvas: document.getElementById("drag-and-drop")});
            camera   = carena.Build({}, [feature.Camera], { renderer: renderer});
            scene    = carena.Build({}, [feature.Node])
            DropNode = carena.Design({}, [feature.Node, feature.Eventable, feature.Draggable]),
            fps      = 1000/60;

        // TODO: move into core
        feature.DropTarget = function(obj, features, options) {
          
        };
        
        camera.target = scene;
        
        var node  = carena.Build({}, [feature.Node]),
            drag1 = carena.Build({}, [feature.Node, feature.Draggable, feature.Droppable]),
            drag2 = carena.Build({}, [feature.Node, feature.Draggable, feature.Droppable]),
            drop  = carena.Build({}, [feature.Node, feature.Draggable, feature.DropTarget])

        scene.add(node.add(drag1).add(drag2));
        scene.add(drop);

        setTimeout(function render() {
          camera.render();
          setTimeout(render, fps)
        }, fps);
      }());
    </script>
  </body>
</html>
